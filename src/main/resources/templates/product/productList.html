<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="MoonShop - 모던한 쇼핑몰">
    <meta name="keywords" content="shop, fashion, modern, ecommerce">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MoonShop - 상품</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- 기존 CSS -->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
    <link th:href="@{/css/elegant-icons.css}" rel="stylesheet">
    <link th:href="@{/css/jquery-ui.min.css}" rel="stylesheet">
    <link th:href="@{/css/magnific-popup.css}" rel="stylesheet">
    <link th:href="@{/css/owl.carousel.min.css}" rel="stylesheet">
    <link th:href="@{/css/slicknav.min.css}" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link th:href="@{/css/product/productList.css}" rel="stylesheet">
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Offcanvas Menu Begin -->
    <div class="offcanvas-menu-overlay"></div>
    <div class="offcanvas-menu-wrapper">
        <div class="offcanvas__close">+</div>
        <ul class="offcanvas__widget">
            <li><span class="icon_search search-switch"></span></li>
            <li><a href="#"><span class="icon_heart_alt"></span>
                <div class="tip">2</div>
            </a></li>
            <li><a href="#"><span class="icon_bag_alt"></span>
                <div class="tip">2</div>
            </a></li>
        </ul>
        <div class="offcanvas__logo">
            <a href="./index.html"><img src="img/logo.png" alt=""></a>
        </div>
        <div id="mobile-menu-wrap"></div>
        <div class="offcanvas__auth">
            <a href="#">Login</a>
            <a href="#">Register</a>
        </div>
    </div>
    <!-- Offcanvas Menu End -->

    <!-- Header Section Begin -->
    <th:block th:replace="common/header :: headFragment"></th:block>
    <!-- Header Section End -->

    <!-- 상품 목록 페이지 시작 -->
    <div class="product-list-page">
        
        <!-- 브레드크럼 -->
        <div class="breadcrumb-section">
            <div class="container">
                <nav class="breadcrumb-nav">
                    <a href="/"><i class="fas fa-home"></i> 홈</a>
                    <span><i class="fas fa-chevron-right"></i></span>
                    <span class="current">상품</span>
                </nav>
            </div>
        </div>

        <!-- 메인 컨텐츠 -->
        <div class="container">
            <div class="products-layout">
                
                <!-- 좌측 필터 사이드바 -->
                <aside class="filter-sidebar">
                    <div class="filter-section">
                        <h3><i class="fas fa-th-list"></i> 카테고리</h3>
                        <div class="category-list">
                            <div class="category-group" th:each="product : ${productType}" th:if="${product.getParentCategory().isEmpty()}">
                                <div class="category-parent">
                                    <button type="button" class="category-toggle" 
                                            th:attr="data-target='#category-' + ${product.code}">
                                        <span th:text="${product.value}">카테고리명</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                                <div class="category-children" th:id="'category-' + ${product.code}">
                                    <a href="#" class="category-child" th:each="childProduct : ${product.getChildCategories()}"
                                       th:text="${childProduct.value}">하위 카테고리</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- 우측 상품 그리드 -->
                <main class="products-main">
                    
                    <!-- 상품 헤더 -->
                    <div class="products-header">
                        <div class="products-info">
                            <h1>전체 상품</h1>
                            <p class="products-count" th:text="${productList.totalElements} + '개의 상품'">총 24개의 상품</p>
                        </div>
                        <div class="products-controls">
                            <div class="view-toggle">
                                <button class="view-btn active" data-view="grid">
                                    <i class="fas fa-th"></i>
                                </button>
                                <button class="view-btn" data-view="list">
                                    <i class="fas fa-list"></i>
                                </button>
                            </div>
                            <select class="sort-select">
                                <option>인기순</option>
                                <option>최신순</option>
                                <option>가격 낮은순</option>
                                <option>가격 높은순</option>
                            </select>
                        </div>
                    </div>

                    <!-- 상품 그리드 -->
                    <div class="products-grid" id="products-grid">
                        <div class="product-card" th:each="product : ${productList}">
                            <div class="product-image" th:onclick="|location.href='@{/product/productInfo?productSeq=}${product.productSeq}'|">
                                <img th:src="'/fileDownload?fileSeq=' + ${product.productFileList[0].file.fileSeq}" 
                                     th:alt="${product.productName}">
                                <div class="product-overlay">
                                    <button class="quick-view-btn">
                                        <i class="fas fa-eye"></i>
                                        빠른 보기
                                    </button>
                                </div>
                                <div class="product-badge new">NEW</div>
                                <div class="product-actions">
                                    <button class="action-btn heart-btn" th:id="'heart-' + ${product.productSeq}">
                                        <i th:class="${product.heart != null ? 'fas fa-heart active' : 'far fa-heart'}"></i>
                                    </button>
                                    <button class="action-btn cart-btn">
                                        <i class="fas fa-shopping-bag"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="product-info">
                                <h3 class="product-name" th:text="${product.productName}">상품명</h3>
                                <div class="product-price" th:text="'₩' + ${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')}">₩50,000</div>
                                <div class="product-rating">
                                    <div class="stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="rating-count">(24)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 페이지네이션 -->
                    <div class="pagination-wrapper">
                        <nav class="pagination-nav">
                            <a href="#" class="page-btn prev" th:if="${productList.hasPrevious()}">
                                <i class="fas fa-chevron-left"></i>
                            </a>
                            <div class="page-numbers">
                                <a th:each="page : ${#numbers.sequence(1, productList.totalPages)}"
                                   th:href="@{/product(page=${page})}"
                                   th:class="${productList.number+1 == page ? 'page-number active' : 'page-number'}"
                                   th:text="${page}">1</a>
                            </div>
                            <a href="#" class="page-btn next" th:if="${productList.hasNext()}">
                                <i class="fas fa-chevron-right"></i>
                            </a>
                        </nav>
                    </div>

                </main>

            </div>
        </div>
    </div>
    <!-- 상품 목록 페이지 끝 -->

    <!-- Footer Section Begin -->
    <th:block th:replace="common/footer :: footFragment"></th:block>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script type="text/javascript" th:src="@{/js/jquery-3.3.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.magnific-popup.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery-ui.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/mixitup.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.countdown.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.slicknav.js}"></script>
    <script type="text/javascript" th:src="@{/js/owl.carousel.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.nicescroll.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/main.js}"></script>
    <script type="text/javascript" th:src="@{/js/common/common.js}"></script>
    <script type="text/javascript" th:src="@{/js/product/productList.js}"></script>
</body>
</html>