<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoonShop - 좋아요</title>
    
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 기존 CSS 먼저 로드 -->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
    <link th:href="@{/css/elegant-icons.css}" rel="stylesheet">
    <link th:href="@{/css/jquery-ui.min.css}" rel="stylesheet">
    <link th:href="@{/css/magnific-popup.css}" rel="stylesheet">
    <link th:href="@{/css/owl.carousel.min.css}" rel="stylesheet">
    <link th:href="@{/css/slicknav.min.css}" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
    
    <!-- Custom CSS (마지막에 로드) -->
    <link th:href="@{/css/myPage/myHeart.css}" rel="stylesheet">
    <link th:href="@{/css/common/side.css}" rel="stylesheet">
</head>

<body>
    <!-- Header Section -->
    <th:block th:replace="common/header :: headFragment"></th:block>
    
    <!-- SideBar Section -->
    <th:block th:replace="common/side :: sideFragment"></th:block>
    
    <!-- 좋아요 페이지 시작 - CSS 범위 제한 -->
    <div class="heart-page">
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb-container">
            <ul class="breadcrumb">
                <li><a href="/"><i class="fas fa-home"></i></a></li>
                <li><a href="/myPage/myPage">마이페이지</a></li>
                <li class="active">좋아요</li>
            </ul>
        </nav>
        
        <!-- Heart Container -->
        <main class="heart-container">
            <div class="heart-header">
                <h1>좋아요</h1>
                <p class="heart-count" th:text="${#lists.size(myHeartList?.content ?: {})} + '개 상품'">0개 상품</p>
            </div>
            
            <!-- Empty Hearts -->
            <div class="empty-hearts" th:if="${myHeartList == null || myHeartList.totalPages == 0}">
                <div class="empty-hearts-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <h2>좋아요한 상품이 없습니다</h2>
                <p>마음에 드는 상품을 찾아 하트를 눌러보세요!</p>
                <a href="/main" class="btn btn-primary">쇼핑하러 가기</a>
            </div>
            
            <!-- Heart Items -->
            <div class="heart-content" th:unless="${myHeartList == null || myHeartList.totalPages == 0}">
                
                <!-- Heart Grid -->
                <div class="heart-grid">
                    <div class="heart-item" th:each="heart, i : ${myHeartList}">
                        <div class="heart-card" th:onclick="|location.href='@{/product/productInfo?productSeq=}${heart.productSeq}'|">
                            <!-- Product Image -->
                            <div class="product-image-container">
                                <img th:src="'/fileDownload?fileSeq=' + ${heart.productImgFlSeq}" alt="Product Image" class="product-image">
                                <div class="heart-overlay">
                                    <div class="heart-icon active" th:onclick="event.stopPropagation(); toggleHeart(this, ${heart.productSeq})">
                                        <i class="fas fa-heart"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Product Info -->
                            <div class="product-info">
                                <h3 class="product-title" th:text="${heart.productName}">상품명</h3>
                                
                                <!-- Rating -->
                                <div class="product-rating">
                                    <div class="rating-stars">
                                        <i class="fas fa-star active"></i>
                                        <i class="fas fa-star active"></i>
                                        <i class="fas fa-star active"></i>
                                        <i class="fas fa-star active"></i>
                                        <i class="fas fa-star active"></i>
                                    </div>
                                    <span class="rating-text">5.0</span>
                                </div>
                                
                                <!-- Price -->
                                <div class="product-price">
                                    <span th:text="${#numbers.formatDecimal(heart.price, 0, 'COMMA', 0, 'POINT')} + '원'">20,000원</span>
                                </div>
                                
                                <!-- Heart Count -->
                                <div class="heart-count-info">
                                    <i class="fas fa-heart"></i>
                                    <span th:text="${heart.heartCnt}">12</span>
                                </div>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="product-actions">
                                <button class="btn btn-primary btn-sm" th:onclick="event.stopPropagation(); addToCart(${heart.productSeq})">
                                    <i class="fas fa-shopping-cart"></i>
                                    장바구니
                                </button>
                                <button class="btn btn-outline btn-sm" th:onclick="event.stopPropagation(); quickView(${heart.productSeq})">
                                    <i class="fas fa-eye"></i>
                                    빠른보기
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pagination -->
                <div class="pagination-container" th:if="${myHeartList.totalPages > 1}">
                    <nav class="pagination">
                        <a th:if="${myHeartList.hasPrevious()}" 
                           th:href="@{/myPage/myHeartList(page=${myHeartList.number})}"
                           class="page-btn prev">
                            <i class="fas fa-chevron-left"></i>
                        </a>
                        
                        <a th:each="page : ${#numbers.sequence(1, myHeartList.totalPages)}"
                           th:href="@{/myPage/myHeartList(page=${page})}"
                           th:class="${myHeartList.number+1 == page ? 'page-btn current' : 'page-btn'}"
                           th:text="${page}">1</a>
                        
                        <a th:if="${myHeartList.hasNext()}" 
                           th:href="@{/myPage/myHeartList(page=${myHeartList.number+2})}"
                           class="page-btn next">
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </div>
            </div>
        </main>
    </div>
    <!-- 좋아요 페이지 끝 -->
    
    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast">
        <div class="toast-content">
            <i class="fas fa-check-circle toast-icon"></i>
            <span class="toast-message">메시지</span>
        </div>
    </div>
    
    <!-- Footer Section -->
    <th:block th:replace="common/footer :: footFragment"></th:block>
    
    <!-- Scripts -->
    <script type="text/javascript" th:src="@{/js/jquery-3.3.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.magnific-popup.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery-ui.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/mixitup.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.countdown.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.slicknav.js}"></script>
    <script type="text/javascript" th:src="@{/js/owl.carousel.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.nicescroll.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/main.js}"></script>
    <script type="text/javascript" th:src="@{/js/myPage/myHeart.js}"></script>
    <script type="text/javascript" th:src="@{/js/common/side.js}"></script>
</body>

</html>